# Avito - собственная версия

## Изучение области компетенции

* Создайте макет, чтобы смоделировать представления(views) приложения
* Используйте Sequelize Associations
* Выполните все четыре части [CRUD][]: создавать, читать, обновлять и удалять. 
* Используйте шаблон MVC в веб-приложении с правильным распределением кода и обязанностей для каждого уровня 

## Общие сведения

Мы создадим простую версию Avito. Это будет веб-приложение, использующее несколько моделей. 

Веб-версия приложений не очень сильно отличается от версии командной строки с точки зрения логики. Вместо того, чтобы читать в аргументах командной строки, мы читаем в параметрах URL. Вместо печати на консоль, мы печатаем в HTML и CSS.

У нас будет только две модели, использующие связь «один-ко-многим». 

Репозиторий уже включает в себя основную структуру проекта на Sequelize + Express.


## Releases

### Release 0: Макет с вашей парой

Никогда не слышали о веб-макете? Проверьте [wireframe][wireframe]. Выясните, какие *страницы* нужны для вашего приложения, а затем набросайте основную *разметку* каждой страницы и *связи* между ними.

У приложения будет две основные модели `Article` и `Category`.  `Article` принадлежит к `Category`, а в `Category` есть много `Articles`.

`Category` - это что-то вроде "Аренда квартиры" или "Автозапчасти"

Сядьте и поработайте с вашей парой над тем, какие страницы вы собираетесь создать.
Как минимум, вам понадобятся:

1. Страница, в которой перечислены все категории
2. Страница, в которой перечислены все статьи данной категории
3. Страница, которая позволяет кому-то создать новую статью в данной категории
4. Страница, которая позволяет кому-то, кто создал страницу, вернуться к редактированию/обновлению страницы

Мы не будем использовать авторизацию пользователей. Вместо этого, когда кто-то создает статью, ему/ей будет предоставляться специальный «секретный» URL-адрес, который предоставляет ему/ей полномочия для редактирования такой статьи. URL-адрес редактирования статьи должен выглядеть примерно так:

```text
http://localhost:3000/articles/123/edit?key=klidp219
```

Ключ генерируется случайным образом. Пользователь получает свой "edit URL" (URL-адрес для правки) после того, как он/она успешно создали статью. Любой, у кого есть этот URL, может редактировать статью. 

Подумайте об этом, как о реальном веб-приложении, которое вы хотели бы использовать.
Какие поля должна иметь `Article`?

Цены? Будете ли вы их указывать? Каким должен быть тип столбца, связанного с деньгами?

Электронная почта, по которой можно будет связаться с автором статьи. Название, описание и т.д.

Потратьте время на нумерацию страниц, определяя, что должно отображаться на каждой из них. 

### Release 1: Создайте структуру контроллера

Наша структура контроллера будет не такой простой как раньше. Нам понадобятся URL-адреса, которые выглядят как `/categories/123` и `/articles/456`. Мы будем использовать методы `get` и` post`.

Например, для создания новой `Article`, мы хотели бы отправить HTML-форму, используя http-метод POST, в URL `/articles`, например:

```html
<form action="/articles" method="post">
  <!-- other form elements here -->
</form>
```

и чтобы обновить существующую запись (например, с id `1234`), мы хотели бы отправить запрос по адресу `/articles/1234`.


Контроллеры должны либо перенаправлять на другой URL-адрес, либо визуализировать страницу. Как правило, страница, загруженная через HTTP POST, перенаправит на соответствующий URL-адрес, если запрос выполнен успешно, в противном случае появляется страница ошибки.

#### Организация

Содержание вашего кода в организованном порядке является важной частью любого программного проекта. Наиболее важно следовать условным обозначениям, таким образом, новому члену вашей команды не нужно будет тратить дни на то, чтобы понять его детали.


Разработчики могут не прийти к согласию в отношении того, каким соглашениям (об организации структуры кода) нужно следовать, но все согласятся, что какое-либо из соглашений лучше, чем ни одного. 

В этом приложении у вас будут модели `Article` и `Category`. Мы будем описывать их в разных файлах:


```text
models
  | - article.js
  | - category.js
```

Почему бы не сделать то же самое для ваших контроллеров? У вас может быть по одному контроллеру на каждую модель! Каждый контроллер будет обрабатывать все запросы (CRUD) для каждой из этих моделей. Например.:


```text
routes
  | - article.js
  | - category.js
  | - index.js
```

Вы можете держать `index.js` для запросов, которые не относятся к `Category` или к `Article`. Ваша корневая страница `/`, куда ведет ссылка, хорошо подходит для `index.js`

Такой же организационный метод может быть применен к вашим представлениям hbs. Вместо заполнения вашего каталога `views` полдюжиной шаблонов hbs:

```text
views
  | - category_index.hbs
  | - category_show.hbs
  | - edit_article.hbs
  | - new_article.hbs
  | - article_show.hbs
  | - articles_index.hbs
```

Почему бы не создать подкаталог `articles` и `categories`?

```
views
  | - articles
    | - edit.hbs
    | - new.hbs
    | - show.hbs
    | - index.hbs
  | - categories
    | - index.hbs
    | - show.hbs
```

Теперь с подкаталогами `articles` и `categories` наши имена шаблонов hbs соответствует нашему соглашению об организации кода. Здорово!


### Запускайте!

Убедитесь, что основные функции работают. У нас должна быть возможность загрузить ваше приложение, запустить его и выполнить следующие действия:

1. Выбрать категорию для просмотра
2. Просмотреть все статьи в определенной категории
3. Просмотреть конкретную статью
4. Создать свою собственную статью
5. Редактировать свои статьи, используя «секретный ключ», который мы получим после создания своих статей 

Когда мы говорим «загрузите приложение», мы имеем в виду «найдите его на сайте, установите тем или иным образом, запустите миграции и запустите сервер». Представьте, что вы показываете это замечательное приложение своему боссу или коллеге, которые помогут вам, если они смогут его запустить и попробовать в работе. Хороший разработчик обеспечивает легкие загрузку и запуск своих приложений. Не тратить время других людей впустую - это хорошее качество.


### Release 3: Добавьте один заключительный компонент

Осталось добавить один заключительный компонент: что-нибудь очень классное! Что это значит? Это может означать что угодно. Новые нестандартные функции, крутой дизайн, оптимизация, встраивание дополнительных технологий.

Это не гонка; нет финишной прямой, только крайний срок (на завтра, кто бы сомневался!).
Потратьте время на то, чтобы сделать это приложение таким, чтобы вы смогли им гордиться. Это не обязательно должно быть что-то очень впечетляющее - это может быть технически сложная задача, с которой вы справитесь.

Привнесите 100% вашего лучшего «я» в этот компонент. Создайте что-то значимое; сделайте что-то великое.


## Ресурсы

* Create, Read, Update, Delete ([CRUD][])
* Wireframe ([wireframe][])

[CRUD]: http://en.wikipedia.org/wiki/Create,_read,_update_and_delete
[wireframe]: http://en.wikipedia.org/wiki/Website_wireframe
